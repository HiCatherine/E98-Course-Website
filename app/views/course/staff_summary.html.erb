<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
  <title>Main | Engineering 98 Winter 2019</title>
  <meta charset="UTF-8">
  <meta name="description" content="Engineering 98: Introduction to Programming in Ruby">
  <meta name="keywords" content="Eng98, Engineering, Eng, 98, Programming in Ruby, Berkeley, EECS">
  <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet">
  <%= stylesheet_link_tag asset_path("common.css", skip_pipeline: true) %>
  <%= stylesheet_link_tag asset_path("index.css", skip_pipeline: true) %>
  <%= stylesheet_link_tag asset_path("font-awesome.min.css", skip_pipeline: true) %>
  <%= stylesheet_link_tag asset_path("sunburst.css", skip_pipeline: true) %>
  <%= stylesheet_link_tag asset_path("fullcalendar.min.css", skip_pipeline: true) %>
  <%= stylesheet_link_tag asset_path("calendar.css", skip_pipeline: true) %>
  <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
</head>

<body>
<div id="navbar" class="navbar-top navitems">
  <a href="/">
    <div class="navitem">Main</div>
  </a>
  <a href="#">
    <div class="navitem">Course Info</div>
  </a>
  <a href="#">
    <div class="navitem">Staff</div>
  </a>
  <a href="#">
    <div class="navitem">Scores</div>
  </a>
  <a href="#">
    <div class="navitem">Screencasts</div>
  </a>
  <a href="#">
    <div class="navitem">Resources</div>
  </a>
  <a href="#">
    <div class="navitem">Office Hours</div>
  </a>
</div>
<a href="index.html">
  <div id="coursename">
    <span id="courseid">Engineering 98:</span>
    Introduction to Programming in Ruby
  </div>
</a>
<div id="content">
  <div class="segment">
    <div class="segmenttitle">
      View Scores
    </div>
    <div>
      <% if flash[:notice] %>
        <strong><%= flash[:notice] %></strong><br>
      <% end %>
      <% if not current_user.nil? and current_user.email == 'paulshaoyuqiao1@berkeley.edu' %>
        Welcome, <strong><%= current_user.name %></strong>!
        <%= link_to "Sign out", signout_path, id: "sign_out" %><br>
        <% if @scores.any? %>
          <table id="scores">
            <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>Week</th>
              <th>Total Test Cases</th>
              <th>Passed Test Cases</th>
              <th>Correctness</th>
              <th>Submitted At</th>
            </tr>
            </thead>
            <tbody>
            <% @scores.each do |score| %>
              <tr>
                <td><%= score.name %></td>
                <td><%= score.email %></td>
                <td><%= score.week %></td>
                <td><%= score.total_test %></td>
                <td><%= score.passed_test %></td>
                <td><%= score.total_score %> %</td>
                <td><%= score.created_at %></td>
              </tr>
            <% end %>
            </tbody>
          </table>
        <% else %>
          <h2>Unauthorized Access for <strong><%= current_user.name %></strong></h2><br>
        <% end %>
      <% else %>
        <%= link_to "Sign in with Google", "/auth/google_oauth2", id: "sign_in" %>
      <% end %>
    </div>
  </div>
</div>

</body>

</html>